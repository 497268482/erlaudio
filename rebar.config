{deps, [
  {getopt, ".*", {git, "git://github.com/jcomellas/getopt.git", {branch, "master"}}},
  {lager,  ".*", {git, "git://github.com/basho/lager.git", {branch, "master"}}}
]}.

{erl_opts, [{parse_transform, lager_transform}, {lager_truncation_size, 1024}]}.

{escript_incl_apps, [getopt, lager, goldrush]}.
{escript_emu_args, "%%! -escript main erlaudio_escript\n"}.

{port_specs, [
    {"priv/erlaudio_drv.so", ["c_src/erlaudio_drv.c"]}
]}.

{port_envs, [
    %% Make sure to link -lstdc++ on linux or solaris
    {"(linux|solaris)", "LDFLAGS", "$LDFLAGS -lstdc++"},

    {"LDFLAGS", "$LDFLAGS -lportaudio"},
    % {"CFLAGS", "$CFLAGS -L/opt/local/include"},

    %% OS X Leopard flags for 64-bit
    {"darwin9.*-64$", "CXXFLAGS", "-m64"},
    {"darwin9.*-64$", "LDFLAGS", "-arch x86_64"},

    %% OS X Snow Leopard flags for 32-bit
    {"darwin10.*-32$", "CXXFLAGS", "-m32"},
    {"darwin10.*-32$", "LDFLAGS", "-arch i386"}
]}.
